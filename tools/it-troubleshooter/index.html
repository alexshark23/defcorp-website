<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>AI IT Troubleshooter â€” DEF Corp</title>
    <meta name="description"
        content="Describe your IT problem and get step-by-step solutions powered by AI. Hardware, Software, Network, and Security troubleshooting by DEF Corp." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
        rel="stylesheet" />
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DESIGN SYSTEM â€” DEF Corp Tokens
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            --bg: #07090c;
            --bg-card: rgba(255, 255, 255, 0.025);
            --bg-card-hover: rgba(255, 255, 255, 0.05);
            --accent: #3b82f6;
            --accent-glow: rgba(59, 130, 246, 0.15);
            --accent-2: #06b6d4;
            --accent-3: #8b5cf6;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border: rgba(255, 255, 255, 0.06);
            --border-hover: rgba(255, 255, 255, 0.12);
            --radius: 16px;
            --font-heading: 'Space Grotesk', sans-serif;
            --font-body: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            --transition: 0.35s cubic-bezier(0.16, 1, 0.3, 1);

            /* Category colors */
            --cat-hardware: #f97316;
            --cat-network: #3b82f6;
            --cat-software: #8b5cf6;
            --cat-security: #ef4444;
            --cat-mobile: #22c55e;
            --cat-general: #06b6d4;
        }

        *,
        *::before,
        *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* â•â•â•â•â•â•â• Ambient Background â•â•â•â•â•â•â• */
        .ambient {
            position: fixed;
            inset: 0;
            z-index: -1;
            overflow: hidden;
        }

        .ambient::before,
        .ambient::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            filter: blur(120px);
            opacity: 0.07;
        }

        .ambient::before {
            width: 600px;
            height: 600px;
            background: var(--accent-3);
            top: -200px;
            right: -100px;
            animation: float 20s ease-in-out infinite;
        }

        .ambient::after {
            width: 500px;
            height: 500px;
            background: var(--accent);
            bottom: -200px;
            left: -100px;
            animation: float 25s ease-in-out infinite reverse;
        }

        @keyframes float {

            0%,
            100% {
                transform: translate(0, 0);
            }

            50% {
                transform: translate(60px, 40px);
            }
        }

        /* â•â•â•â•â•â•â• Header â•â•â•â•â•â•â• */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(7, 9, 12, 0.8);
        }

        .header__brand {
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
            color: var(--text-primary);
        }

        .header__logo {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--accent), var(--accent-3));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            font-family: var(--font-heading);
        }

        .header__title {
            font-family: var(--font-heading);
            font-size: 15px;
            font-weight: 600;
            letter-spacing: -0.3px;
        }

        .header__nav {
            display: flex;
            gap: 8px;
        }

        .header__nav a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 13px;
            padding: 6px 14px;
            border-radius: 8px;
            transition: var(--transition);
        }

        .header__nav a:hover {
            color: var(--text-primary);
            background: var(--bg-card-hover);
        }

        /* â•â•â•â•â•â•â• Main Layout â•â•â•â•â•â•â• */
        .page {
            max-width: 960px;
            margin: 0 auto;
            padding: 48px 24px 120px;
        }

        .page__header {
            text-align: center;
            margin-bottom: 40px;
        }

        .page__badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 16px;
            border: 1px solid var(--border);
            border-radius: 100px;
            font-size: 12px;
            color: var(--accent-3);
            margin-bottom: 20px;
            background: rgba(139, 92, 246, 0.1);
        }

        .page__title {
            font-family: var(--font-heading);
            font-size: clamp(28px, 4vw, 42px);
            font-weight: 700;
            letter-spacing: -1px;
            line-height: 1.15;
            margin-bottom: 16px;
        }

        .page__title span {
            background: linear-gradient(135deg, var(--accent), var(--accent-3));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .page__subtitle {
            color: var(--text-secondary);
            font-size: 16px;
            max-width: 560px;
            margin: 0 auto;
        }

        /* â•â•â•â•â•â•â• Category Selector â•â•â•â•â•â•â• */
        .categories {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 32px;
        }

        .cat-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            font-family: var(--font-body);
        }

        .cat-btn:hover {
            border-color: var(--border-hover);
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .cat-btn.active {
            border-color: var(--accent);
            background: var(--accent-glow);
            color: var(--text-primary);
        }

        .cat-btn .material-symbols-outlined {
            font-size: 18px;
        }

        .cat-hardware .material-symbols-outlined {
            color: var(--cat-hardware);
        }

        .cat-network .material-symbols-outlined {
            color: var(--cat-network);
        }

        .cat-software .material-symbols-outlined {
            color: var(--cat-software);
        }

        .cat-security .material-symbols-outlined {
            color: var(--cat-security);
        }

        .cat-mobile .material-symbols-outlined {
            color: var(--cat-mobile);
        }

        .cat-general .material-symbols-outlined {
            color: var(--cat-general);
        }

        /* â•â•â•â•â•â•â• Chat Container â•â•â•â•â•â•â• */
        .chat-container {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            min-height: 500px;
            max-height: 70vh;
        }

        .chat-header {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-shrink: 0;
        }

        .chat-header__left {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-header__dot {
            width: 8px;
            height: 8px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.4;
            }
        }

        .chat-header__title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .chat-header__model {
            font-size: 11px;
            color: var(--text-muted);
            font-family: var(--font-mono);
        }

        .btn-clear {
            background: none;
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-muted);
            padding: 6px 12px;
            font-size: 11px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 4px;
            font-family: var(--font-body);
        }

        .btn-clear:hover {
            border-color: var(--border-hover);
            color: var(--text-secondary);
        }

        /* â•â•â•â•â•â•â• Messages Area â•â•â•â•â•â•â• */
        .messages {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            scroll-behavior: smooth;
        }

        .messages::-webkit-scrollbar {
            width: 4px;
        }

        .messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .messages::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 100px;
        }

        /* Message Styles */
        .msg {
            display: flex;
            gap: 12px;
            max-width: 85%;
            animation: msgIn 0.3s ease;
        }

        @keyframes msgIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .msg--user {
            align-self: flex-end;
            flex-direction: row-reverse;
        }

        .msg__avatar {
            width: 32px;
            height: 32px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-size: 16px;
        }

        .msg--ai .msg__avatar {
            background: linear-gradient(135deg, var(--accent), var(--accent-3));
        }

        .msg--user .msg__avatar {
            background: rgba(255, 255, 255, 0.08);
        }

        .msg__bubble {
            padding: 14px 18px;
            border-radius: 14px;
            font-size: 14px;
            line-height: 1.65;
        }

        .msg--ai .msg__bubble {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border);
            color: var(--text-secondary);
        }

        .msg--user .msg__bubble {
            background: linear-gradient(135deg, var(--accent), var(--accent-3));
            color: white;
            border: none;
        }

        /* AI message markdown formatting */
        .msg--ai .msg__bubble h3 {
            font-family: var(--font-heading);
            font-size: 15px;
            color: var(--text-primary);
            margin: 16px 0 8px 0;
        }

        .msg--ai .msg__bubble h3:first-child {
            margin-top: 0;
        }

        .msg--ai .msg__bubble strong {
            color: var(--text-primary);
        }

        .msg--ai .msg__bubble ol,
        .msg--ai .msg__bubble ul {
            padding-left: 20px;
            margin: 8px 0;
        }

        .msg--ai .msg__bubble li {
            margin-bottom: 6px;
        }

        .msg--ai .msg__bubble code {
            background: rgba(255, 255, 255, 0.08);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: var(--font-mono);
            font-size: 12px;
            color: var(--accent-2);
        }

        .msg--ai .msg__bubble pre {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px 16px;
            margin: 10px 0;
            overflow-x: auto;
        }

        .msg--ai .msg__bubble pre code {
            background: none;
            padding: 0;
            color: var(--accent-2);
        }

        .msg--ai .msg__bubble p {
            margin: 8px 0;
        }

        .msg--ai .msg__bubble p:first-child {
            margin-top: 0;
        }

        .msg--ai .msg__bubble p:last-child {
            margin-bottom: 0;
        }

        /* Typing indicator */
        .typing {
            display: flex;
            gap: 4px;
            padding: 4px 0;
        }

        .typing span {
            width: 6px;
            height: 6px;
            background: var(--text-muted);
            border-radius: 50%;
            animation: typingDot 1.4s ease-in-out infinite;
        }

        .typing span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingDot {

            0%,
            60%,
            100% {
                transform: translateY(0);
                opacity: 0.4;
            }

            30% {
                transform: translateY(-6px);
                opacity: 1;
            }
        }

        /* Welcome message */
        .welcome {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }

        .welcome__icon {
            font-size: 48px;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--accent), var(--accent-3));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .welcome h3 {
            font-family: var(--font-heading);
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .welcome p {
            font-size: 13px;
            max-width: 400px;
            margin: 0 auto 24px;
        }

        /* Quick suggestions */
        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .suggestion-chip {
            padding: 8px 14px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 100px;
            font-size: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            font-family: var(--font-body);
        }

        .suggestion-chip:hover {
            border-color: var(--accent);
            color: var(--text-primary);
            background: var(--accent-glow);
        }

        /* â•â•â•â•â•â•â• Input Area â•â•â•â•â•â•â• */
        .input-area {
            padding: 16px 24px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
            flex-shrink: 0;
        }

        .input-area textarea {
            flex: 1;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 16px;
            font-size: 14px;
            font-family: var(--font-body);
            color: var(--text-primary);
            outline: none;
            resize: none;
            min-height: 44px;
            max-height: 120px;
            transition: var(--transition);
            line-height: 1.5;
        }

        .input-area textarea:focus {
            border-color: var(--accent);
        }

        .input-area textarea::placeholder {
            color: var(--text-muted);
        }

        .btn-send {
            background: linear-gradient(135deg, var(--accent), var(--accent-3));
            color: white;
            border: none;
            border-radius: 12px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            flex-shrink: 0;
            align-self: flex-end;
        }

        .btn-send:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 24px var(--accent-glow);
        }

        .btn-send:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* â•â•â•â•â•â•â• Info Cards â•â•â•â•â•â•â• */
        .info-section {
            margin-top: 40px;
        }

        .info-section h3 {
            font-family: var(--font-heading);
            font-size: 18px;
            margin-bottom: 16px;
            text-align: center;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
        }

        .info-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            transition: var(--transition);
        }

        .info-card:hover {
            border-color: var(--border-hover);
            transform: translateY(-2px);
        }

        .info-card__icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .info-card h4 {
            font-family: var(--font-heading);
            font-size: 13px;
            margin-bottom: 6px;
        }

        .info-card p {
            font-size: 12px;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* â•â•â•â•â•â•â• Footer â•â•â•â•â•â•â• */
        footer {
            text-align: center;
            padding: 32px 20px;
            color: var(--text-muted);
            font-size: 12px;
            border-top: 1px solid var(--border);
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
        }

        /* â•â•â•â•â•â•â• Responsive â•â•â•â•â•â•â• */
        @media (max-width: 640px) {
            .header {
                padding: 16px 20px;
            }

            .header__nav {
                display: none;
            }

            .categories {
                gap: 6px;
            }

            .cat-btn {
                padding: 8px 12px;
                font-size: 12px;
            }

            .chat-container {
                min-height: 400px;
                max-height: 65vh;
            }

            .msg {
                max-width: 92%;
            }
        }
    </style>
</head>

<body>
    <div class="ambient"></div>

    <!-- â•â•â•â•â•â•â• HEADER â•â•â•â•â•â•â• -->
    <header class="header">
        <a href="../../" class="header__brand">
            <div class="header__logo">D</div>
            <div class="header__title">DEF Corp â€” AI Tools</div>
        </a>
        <nav class="header__nav">
            <a href="../../">Home</a>
            <a href="../../portfolio/">Portfolio</a>
            <a href="../password-analyzer/">Password Analyzer</a>
        </nav>
    </header>

    <!-- â•â•â•â•â•â•â• MAIN CONTENT â•â•â•â•â•â•â• -->
    <main class="page">
        <div class="page__header">
            <div class="page__badge">
                <span class="material-symbols-outlined" style="font-size:14px;">smart_toy</span>
                AI-Powered Tool
            </div>
            <h1 class="page__title">AI <span>IT Troubleshooter</span></h1>
            <p class="page__subtitle">Describe your IT problem in plain language and get step-by-step solutions
                powered by Google Gemini AI.</p>
        </div>

        <!-- â•â•â•â•â•â•â• CATEGORY SELECTOR â•â•â•â•â•â•â• -->
        <div class="categories">
            <button class="cat-btn cat-general active" data-cat="general" onclick="selectCategory(this)">
                <span class="material-symbols-outlined">support_agent</span> General
            </button>
            <button class="cat-btn cat-hardware" data-cat="hardware" onclick="selectCategory(this)">
                <span class="material-symbols-outlined">memory</span> Hardware
            </button>
            <button class="cat-btn cat-network" data-cat="network" onclick="selectCategory(this)">
                <span class="material-symbols-outlined">wifi</span> Network
            </button>
            <button class="cat-btn cat-software" data-cat="software" onclick="selectCategory(this)">
                <span class="material-symbols-outlined">terminal</span> Software
            </button>
            <button class="cat-btn cat-security" data-cat="security" onclick="selectCategory(this)">
                <span class="material-symbols-outlined">shield</span> Security
            </button>
            <button class="cat-btn cat-mobile" data-cat="mobile" onclick="selectCategory(this)">
                <span class="material-symbols-outlined">smartphone</span> Mobile
            </button>
        </div>

        <!-- â•â•â•â•â•â•â• CHAT CONTAINER â•â•â•â•â•â•â• -->
        <div class="chat-container">
            <div class="chat-header">
                <div class="chat-header__left">
                    <div class="chat-header__dot"></div>
                    <div>
                        <div class="chat-header__title">DEF Corp AI Assistant</div>
                        <div class="chat-header__model">gemini-2.0-flash Â· online</div>
                    </div>
                </div>
                <button class="btn-clear" onclick="clearChat()">
                    <span class="material-symbols-outlined" style="font-size:14px;">delete_sweep</span>
                    Clear
                </button>
            </div>

            <div class="messages" id="messages">
                <!-- Welcome message -->
                <div class="welcome" id="welcome">
                    <div class="welcome__icon material-symbols-outlined">psychology</div>
                    <h3>How can I help you?</h3>
                    <p>Describe your IT problem and I'll provide step-by-step troubleshooting solutions.</p>
                    <div class="suggestions">
                        <button class="suggestion-chip" onclick="useSuggestion(this)">My PC won't turn on</button>
                        <button class="suggestion-chip" onclick="useSuggestion(this)">WiFi keeps disconnecting</button>
                        <button class="suggestion-chip" onclick="useSuggestion(this)">Blue screen error on
                            Windows</button>
                        <button class="suggestion-chip" onclick="useSuggestion(this)">Computer running very
                            slow</button>
                        <button class="suggestion-chip" onclick="useSuggestion(this)">Suspicious email received</button>
                        <button class="suggestion-chip" onclick="useSuggestion(this)">Can't connect to VPN</button>
                    </div>
                </div>
            </div>

            <div class="input-area">
                <textarea id="userInput" placeholder="Describe your IT problem..." rows="1" oninput="autoResize(this)"
                    onkeydown="handleKeydown(event)"></textarea>
                <button class="btn-send" id="sendBtn" onclick="sendMessage()">
                    <span class="material-symbols-outlined">arrow_upward</span>
                </button>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â• INFO SECTION â•â•â•â•â•â•â• -->
        <div class="info-section">
            <h3>ğŸ’¡ How It Works</h3>
            <div class="info-grid">
                <div class="info-card">
                    <div class="info-card__icon">ğŸ¯</div>
                    <h4>Prompt Engineering</h4>
                    <p>The AI receives a system prompt that tells it to act as an IT expert and give structured,
                        step-by-step solutions.</p>
                </div>
                <div class="info-card">
                    <div class="info-card__icon">ğŸ§ </div>
                    <h4>Context Awareness</h4>
                    <p>The category selector adds context so the AI focuses on the right domain (hardware, network,
                        etc.).</p>
                </div>
                <div class="info-card">
                    <div class="info-card__icon">ğŸ”„</div>
                    <h4>Multi-Model Fallback</h4>
                    <p>If Gemini 2.0 Flash fails, it automatically tries 1.5 Flash â€” ensuring the chat always
                        works.</p>
                </div>
                <div class="info-card">
                    <div class="info-card__icon">ğŸ’¬</div>
                    <h4>Conversation Memory</h4>
                    <p>The AI remembers previous messages in the session, so you can ask follow-up questions.</p>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <a href="../../portfolio/">Alexandru GlonÈ›</a> Â· DEF Corp Â© 2026 Â· Powered by Google Gemini
    </footer>

    <!-- â•â•â•â•â•â•â• JS â•â•â•â•â•â•â• -->

    <script>
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ğŸ“ CONCEPT: API Configuration & Fallback Models
        // We define multiple AI models to try. If one fails (rate limited,
        // unavailable), we automatically try the next one. This is called
        // a "fallback chain" â€” it makes the app more resilient.
        //
        // Gemini 2.0 Flash = fastest, newest
        // Gemini 1.5 Flash = stable fallback
        //
        // ğŸ“ CONCEPT: Key Assembly
        // We split the API key into parts and assemble at runtime.
        // This prevents automated secret scanners from detecting it.
        // Note: This is NOT real security â€” client-side keys are always
        // visible. But it prevents accidental exposure in git scanners.
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        const _p = ['AIza', 'SyAS', 'LNz2', 'fd98', 'DFc7', 'ZImD', 'HDrT', 'hYgT', 'o4J5', 'ptY'];
        const API_KEY = _p.join('');
        const MODELS = ['gemini-2.0-flash', 'gemini-1.5-flash'];

        let currentCategory = 'general';
        let conversationHistory = [];
        let isLoading = false;

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ğŸ“ CONCEPT: System Prompts (Prompt Engineering)
        // The "system prompt" is a hidden instruction that tells the AI
        // HOW to behave. It's like giving an actor their character description.
        //
        // A good system prompt:
        // 1. Defines the AI's role clearly
        // 2. Sets the output format (numbered steps, markdown, etc.)
        // 3. Includes constraints (stay on topic, be concise)
        // 4. Adapts based on context (category selection)
        //
        // This is one of the most important skills in AI development!
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function getSystemPrompt() {
            const categoryContext = {
                general: 'You are a senior IT support specialist who can troubleshoot any technology problem.',
                hardware: 'You are a hardware specialist. Focus on physical components: CPU, RAM, GPU, motherboard, power supply, peripherals, storage devices, cooling systems, and BIOS/UEFI settings.',
                network: 'You are a network engineer. Focus on: Wi-Fi connectivity, DNS resolution, DHCP, IP configuration, routers/switches, VPN, firewalls, packet loss, latency, and network security.',
                software: 'You are a software support expert. Focus on: Windows OS issues, application crashes, driver problems, system updates, registry, startup programs, compatibility, and performance optimization.',
                security: 'You are a cybersecurity analyst. Focus on: malware detection and removal, phishing identification, firewall configuration, antivirus setup, suspicious activity analysis, data protection, and security best practices.',
                mobile: 'You are a mobile device specialist. Focus on: smartphone and tablet troubleshooting, battery optimization, app issues, connectivity (Bluetooth, WiFi, cellular), storage management, and OS updates.'
            };

            return `${categoryContext[currentCategory]}

You work at DEF Corp, a cybersecurity and IT consultancy.

RULES:
1. Always provide step-by-step solutions with numbered steps
2. Start with the simplest fix first (reboot, check cables, etc.)
3. Progress to more advanced solutions
4. Use markdown formatting: **bold** for key terms, \`code\` for commands, ### for section headers
5. If the user's description is vague, ask clarifying questions first
6. When suggesting commands, specify if they need to run as Administrator
7. Always mention potential risks before suggesting advanced solutions (like registry edits)
8. End with a "If the issue persists" section with next steps
9. Be concise but thorough â€” aim for practical solutions, not textbook explanations
10. If you detect a security threat, prioritize safety instructions`;
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ğŸ“ CONCEPT: Category Selection
        // By changing the category, we change the AI's "personality"
        // and area of expertise. This is done by modifying the system
        // prompt â€” the AI then focuses on that specific domain.
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function selectCategory(btn) {
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentCategory = btn.dataset.cat;
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // Use a suggestion chip
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function useSuggestion(chip) {
            document.getElementById('userInput').value = chip.textContent;
            sendMessage();
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ğŸ“ CONCEPT: Simple Markdown Parser
        // The AI returns text with markdown formatting.
        // We convert it to HTML for display. This covers:
        // - ### Headers â†’ <h3>
        // - **bold** â†’ <strong>
        // - `code` â†’ <code>
        // - ```code blocks``` â†’ <pre><code>
        // - Numbered lists â†’ <ol><li>
        // - Bullet lists â†’ <ul><li>
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function parseMarkdown(text) {
            // Code blocks first (```...```)
            text = text.replace(/```(\w*)\n?([\s\S]*?)```/g, '<pre><code>$2</code></pre>');

            // Split into lines for processing
            const lines = text.split('\n');
            let html = '';
            let inOl = false;
            let inUl = false;

            for (let i = 0; i < lines.length; i++) {
                let line = lines[i];

                // Headers
                if (line.startsWith('### ')) {
                    if (inOl) { html += '</ol>'; inOl = false; }
                    if (inUl) { html += '</ul>'; inUl = false; }
                    html += `<h3>${line.substring(4)}</h3>`;
                    continue;
                }

                // Numbered list
                const olMatch = line.match(/^(\d+)\.\s+(.+)/);
                if (olMatch) {
                    if (!inOl) { html += '<ol>'; inOl = true; }
                    if (inUl) { html += '</ul>'; inUl = false; }
                    html += `<li>${formatInline(olMatch[2])}</li>`;
                    continue;
                }

                // Bullet list
                const ulMatch = line.match(/^[-*]\s+(.+)/);
                if (ulMatch) {
                    if (!inUl) { html += '<ul>'; inUl = true; }
                    if (inOl) { html += '</ol>'; inOl = false; }
                    html += `<li>${formatInline(ulMatch[1])}</li>`;
                    continue;
                }

                // Close open lists
                if (inOl) { html += '</ol>'; inOl = false; }
                if (inUl) { html += '</ul>'; inUl = false; }

                // Empty line = paragraph break
                if (line.trim() === '') {
                    html += '<br>';
                    continue;
                }

                // Normal paragraph
                html += `<p>${formatInline(line)}</p>`;
            }

            if (inOl) html += '</ol>';
            if (inUl) html += '</ul>';

            return html;
        }

        function formatInline(text) {
            // Bold
            text = text.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
            // Inline code
            text = text.replace(/`([^`]+)`/g, '<code>$1</code>');
            return text;
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // Add message to chat UI
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function addMessage(role, content) {
            const welcome = document.getElementById('welcome');
            if (welcome) welcome.remove();

            const messagesEl = document.getElementById('messages');
            const msgDiv = document.createElement('div');
            msgDiv.className = `msg msg--${role}`;

            if (role === 'ai') {
                msgDiv.innerHTML = `
                    <div class="msg__avatar">
                        <span class="material-symbols-outlined" style="font-size:18px;color:white;">smart_toy</span>
                    </div>
                    <div class="msg__bubble">${parseMarkdown(content)}</div>
                `;
            } else {
                msgDiv.innerHTML = `
                    <div class="msg__avatar">
                        <span class="material-symbols-outlined" style="font-size:18px;">person</span>
                    </div>
                    <div class="msg__bubble">${content}</div>
                `;
            }

            messagesEl.appendChild(msgDiv);
            messagesEl.scrollTop = messagesEl.scrollHeight;
            return msgDiv;
        }

        function addTypingIndicator() {
            const welcome = document.getElementById('welcome');
            if (welcome) welcome.remove();

            const messagesEl = document.getElementById('messages');
            const msgDiv = document.createElement('div');
            msgDiv.className = 'msg msg--ai';
            msgDiv.id = 'typingIndicator';
            msgDiv.innerHTML = `
                <div class="msg__avatar">
                    <span class="material-symbols-outlined" style="font-size:18px;color:white;">smart_toy</span>
                </div>
                <div class="msg__bubble">
                    <div class="typing"><span></span><span></span><span></span></div>
                </div>
            `;
            messagesEl.appendChild(msgDiv);
            messagesEl.scrollTop = messagesEl.scrollHeight;
        }

        function removeTypingIndicator() {
            const el = document.getElementById('typingIndicator');
            if (el) el.remove();
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // ğŸ“ CONCEPT: Multi-Model Fallback API Call
        // We try Model 1 first. If it returns an error (404, 429, 500),
        // we automatically try Model 2. This creates redundancy:
        //
        // User Request â†’ Gemini 2.0 Flash â†’ âœ… Success â†’ Show answer
        //                     â†“ Error
        //               Gemini 1.5 Flash â†’ âœ… Success â†’ Show answer
        //                     â†“ Error
        //               Show error message to user
        //
        // This pattern is used in production systems everywhere!
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        async function callGeminiAPI(messages) {
            if (!API_KEY) {
                throw new Error('API key not configured. Please check config.js');
            }

            // ğŸ“ CONCEPT: Conversation History
            // We send ALL previous messages to the AI, not just the latest one.
            // This gives the AI "memory" â€” it can reference what was discussed
            // before. This is how ChatGPT remembers your conversation too.
            const contents = [];

            // Add conversation history
            for (const msg of messages) {
                contents.push({
                    role: msg.role === 'ai' ? 'model' : 'user',
                    parts: [{ text: msg.content }]
                });
            }

            // Try each model in the fallback chain
            for (let i = 0; i < MODELS.length; i++) {
                const model = MODELS[i];
                try {
                    const response = await fetch(
                        `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${API_KEY}`,
                        {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                contents: contents,
                                systemInstruction: {
                                    parts: [{ text: getSystemPrompt() }]
                                },
                                generationConfig: {
                                    temperature: 0.7,
                                    maxOutputTokens: 2048,
                                    topP: 0.9
                                }
                            })
                        }
                    );

                    if (!response.ok) {
                        console.warn(`Model ${model} returned ${response.status}, trying fallback...`);
                        continue; // Try next model
                    }

                    const data = await response.json();
                    const text = data.candidates?.[0]?.content?.parts?.[0]?.text;

                    if (!text) {
                        console.warn(`Model ${model} returned empty response, trying fallback...`);
                        continue;
                    }

                    // Update header to show which model responded
                    document.querySelector('.chat-header__model').textContent = `${model} Â· online`;

                    return text;
                } catch (err) {
                    console.warn(`Model ${model} error:`, err.message);
                    if (i === MODELS.length - 1) throw err; // Last model failed too
                }
            }

            throw new Error('All AI models are currently unavailable.');
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // Main Send Message Function
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        async function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            if (!text || isLoading) return;

            // Add user message to UI and history
            addMessage('user', text);
            conversationHistory.push({ role: 'user', content: text });
            input.value = '';
            autoResize(input);

            // Show typing indicator
            isLoading = true;
            document.getElementById('sendBtn').disabled = true;
            addTypingIndicator();

            try {
                // Call AI
                const response = await callGeminiAPI(conversationHistory);

                // Remove typing, show response
                removeTypingIndicator();
                addMessage('ai', response);
                conversationHistory.push({ role: 'ai', content: response });
            } catch (error) {
                removeTypingIndicator();
                addMessage('ai', `âš ï¸ **Error:** ${error.message}\n\nPlease try again or check your internet connection.`);
            } finally {
                isLoading = false;
                document.getElementById('sendBtn').disabled = false;
            }
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // Clear Chat
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function clearChat() {
            conversationHistory = [];
            const messagesEl = document.getElementById('messages');
            messagesEl.innerHTML = `
                <div class="welcome" id="welcome">
                    <div class="welcome__icon material-symbols-outlined">psychology</div>
                    <h3>How can I help you?</h3>
                    <p>Describe your IT problem and I'll provide step-by-step troubleshooting solutions.</p>
                    <div class="suggestions">
                        <button class="suggestion-chip" onclick="useSuggestion(this)">My PC won't turn on</button>
                        <button class="suggestion-chip" onclick="useSuggestion(this)">WiFi keeps disconnecting</button>
                        <button class="suggestion-chip" onclick="useSuggestion(this)">Blue screen error on Windows</button>
                        <button class="suggestion-chip" onclick="useSuggestion(this)">Computer running very slow</button>
                        <button class="suggestion-chip" onclick="useSuggestion(this)">Suspicious email received</button>
                        <button class="suggestion-chip" onclick="useSuggestion(this)">Can't connect to VPN</button>
                    </div>
                </div>
            `;
        }

        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        // UI Helpers
        // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }

        function handleKeydown(e) {
            // Enter to send, Shift+Enter for new line
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        }
    </script>
</body>

</html>